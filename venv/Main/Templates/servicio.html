<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="locale" content="US">
    <meta name="language" content="en">
    <meta name="country" content="US">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Servicios</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>



</head>

<body>
    <div class="wrapper">
        <!-- Sidebar -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <h3 style="font-weight: 510 !important;">CETEC<img id="logo" src="img/icon.png" ></h3>
            </div>

            <ul class="list-unstyled components">
                <li class="active">
                    <a href="#">Ordenes</a>
                </li>
                <li>
                    <a href="{{url_for('home_page')}}">Home</a>
                </li>
                <li><a href="login.html">Salir</a></li>
            </ul>
        </nav>

        <div id="content">
            <div align="right"> <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#nueva_orden">Nuevo</button>	</div>

        <!-- 4 cards por navbar navbar-expand-lg navbar-light bg-light-->

            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                {% for servicio in servicios %}
                <div class="container-fluid">


                    <div class="card" style="width: 20rem;">
                        <div class="card-body">
                            <h4 class="card-title">{{ servicio['valsSucursal'][0]['nombre'] }}</h4>
                            <h4 class="card-title">Numero de Ticket: {{ servicio['ticket'] }}</h4>
                            <h4 class="card-title">Fecha de Vencimiento: {{ servicio['fechaDeVencimiento'] }}</h4>
                            <h6 class="card-subtitle mb-2 text-muted">{{ servicio['sucursal'] }}</h6>
                            <h6 class="card-subtitle mb-2 text-muted">{{ servicio['solicitante'] }} </h6>
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#confirm-delete-{{servicio._id}}"  value={{servicio['_id']}}>Detalles</button>
                        </div>
                    </div>

                </div>

                <div class="modal fade" id="confirm-delete-{{servicio._id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                    <div class="modal-dialog" role="document" >
                        <div class="modal-content" >
                            <div class="modal-header" style="padding-bottom:0;">
                                <h5 class="modal-title" id="exampleModalLongTitle" style="padding-left:1rem;"><b>Orden de servicio</b></h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">x</span>
                                </button>
                            </div>

                            <div class="modal-body">


                                <div class="container-fluid"  id="{{ servicio['ticket'] }}">
                                    <div class=".col-md-4 .ml-auto"><b>No. de Ticket:</b> {{ servicio['ticket'] }}</div>
                                    <div class="col-md-9 .ml-auto" style="padding:0;"><b>Solicitante: </b>{{ servicio['solicitante'] }}</div>

                                    <div class=".col-md-4 .ml-auto"><b>ID(Sucursal): </b>{{ servicio['valsSucursal'][0]['nombre'] }}</div>
                                    <div class=".col-md-4 .ml-auto"><b>ID(Tecnico): </b>{{ servicio['valsTecnico'][0]['nombre'] }}</div>
                                    <div class=".col-md-4 .ml-auto"><b>ID(Presupuesto): </b>{{ servicio['presupuesto_ID'] }}</div>
                                    <div class=".col-md-4 .ml-auto"><b>Prioridad: </b>{{ servicio['prioridad'] }}</div>
                                    <div class=".col-md-4 .ml-auto"><b>Tipo de mantenimiento: </b>{{ servicio['tipoDeMantenimiento'] }}</div>
                                    <div class=".col-md-4 .ml-auto"><b>Pagina De Internet:  </b>{{ servicio['paginaDeInternet'] }}</div>
                                    <div class=".col-md-4 .ml-auto"><b>Autorizacion:  </b>{{ servicio['autorizacion'] }}</div>
                                    <div class=".col-md-4 .ml-auto"><b>Plano:  </b>{{ servicio['plano'] }}</div>
                                    <div class=".col-md-4 .ml-auto"><b>Estatus Interno:  </b>{{ servicio['estatusInterno'] }}</div>
                                    <div class=".col-md-4 .ml-auto"><b>Estatus Externo:  </b>{{ servicio['estatusExterno'] }}</div>
                                    <div class=".col-md-4 .ml-auto"><b>Fecha de Vencimiento:  </b>{{ servicio['fechaDeVencimiento'] }}</div>

                                </div>


                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" onclick="editDisplay({{ servicio['ticket'] }})">Editar</button>
                                <button type="button" class="btn btn-primary">Guardar</button>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </nav>

            <!-- Modales-->
            <div class="modal fade" id="nueva_orden" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">Nueva orden</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form action="" method="post">
                                <h6>Sucursal </h6>


                                <select name="servicioSucursal">
                                    {% for sucursal in sucursales %}
                                    <option value="{{ sucursal['_id'] }}">{{sucursal['nombre']}}</option>
                                    {% endfor %}
                                </select>

                                <h6>Solicitante </h6>
                                <input type="text" name="servicioSolicitante" placeholder="Ingresa nombre del solicitante"  style="width:27rem;">
                                <h6>No. Ticket </h6>
                                <input type="text" name="servicioTicket" placeholder="Ingresa el No. de Ticket"  style="width:27rem;">
                                <h6>Prioridad </h6>
                                <input type="radio" name="servicioPrioridad" value="alta"> Alta<br>
                                <input type="radio" name="servicioPrioridad" value="media"> Media<br>
                                <input type="radio" name="servicioPrioridad" value="baja"> Baja
                                <h6>Tipo de mantenimiento </h6>
                                <input type="text" name="servicioTipoDeMantenimiento" placeholder="Ingresa tipo de mantenimiento"  style="width:27rem;">
                                <h6>Asignación a técnico </h6>

                                <select name="servicioTecnico">
                                    {% for tecnico in tecnicos %}
                                    <option value="{{ tecnico['_id'] }}">{{tecnico['nombre']}}</option>
                                    {% endfor %}
                                </select>

                                <h6>Fecha de Vencimiento</h6>
                                <input type="date" name="servicioFechaDeVencimiento">


                                <div class="modal-footer">
                                    <input type="submit" name="" value="Añadir" >
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

</body>

<script type="text/javascript" >
    function editDisplay(id) {
        var cuadrito = document.getElementById(id);
        
        //var a = document.createElement("form");
        //a.setAttribute("method","post");
        //a.setAttribute("action","action="{{url_for('tecnico')}}"");


    }
    </script>
</html>